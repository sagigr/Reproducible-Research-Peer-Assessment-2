## Reproducible Research: Peer Assessment 2

# Analysis of Health and Economic Impacts of Severe Weather Events Across the United States

By Sagi Greenstine (sagigr@gmail.com)
Date: 26-10-2015

## Assignment

The basic goal of this assignment is to explore the NOAA Storm Database and answer some basic questions about severe weather events. You must use the database to answer the questions below and show the code for your entire analysis. Your analysis can consist of tables, figures, or other summaries. You may use any R package you want to support your analysis.

## Synopsis

This analysis based on the U.S. National Oceanic and Atmospheric Administration's (NOAA) Storm Database, that contains the events starting from 1950 until November 2011. 
The NOAA Storm Database tracks characteristics of major storms and weather events in the United States, including when and where they occur, as well as estimates of any fatalities, injuries, and property damage.
This data analysis project tries to answer the following questions:
1. Across the United States, which types of events (as indicated in the EVTYPE variable) are most harmful with respect to population health?
2. Across the United States, which types of events have the greatest economic consequences?

The conclusion of this analysis is...



## Data Processing

### Loading and preprocessing the data

```{r loaddata}
if(!exists("stormdata")){
  stormdata <- read.csv("./repdata-data-StormData.csv.bz2", row.names = NULL, nrows=902297, check.names=F,           stringsAsFactors=F, header=T, sep=',', na.strings="NA", comment.char="", quote='\"')
}
```

```{r strdataset, results="hide""}
str(stormdata)
```

This dataset has 902,297 observations of  37 variables.

Also, one of the important parameteres is event type (EVTYPE variable). The values of event types don't have a specific format.

I have to clean and tidy the data before I answer the questions.

Let see a number of unique values of EVTYPE in raw dataset:

```{r uniquerawdata}
length(unique(stormdata$EVTYPE))
```

There are 985 unique values of event types. Let's try to reduce this amount by means of the following operations:

1. Bringing all the values of EVTYPE to the lowercase format:

```{r lowercase}
tidyevtype <- tolower(stormdata$EVTYPE)
```

2. Replacement of punctuation, control and blank characters with the space

```{r repcharacters}
tidyevtype <- gsub("[[:blank:][:punct:][:cntrl:]+]", " ", tidyevtype)
length(unique(tidyevtype))
```

Now, there are 874 unique values of event types.

Let's update the dataset with processed values of event types:

```{r evtypeupdate}
stormdata$EVTYPE <- tidyevtype
```

3. Reducing of unique similar values of event types to similar instances:

```{r similarevtype}
reducedStormData$damageSource <- NA

reducedStormData[grepl("precipitation|rain|hail|drizzle|wet|percip|burst|depression|fog|wall cloud", 
                         reducedStormData$EVTYPE, ignore.case = TRUE), "damageSource"] <- "Precipitations"
reducedStormData[grepl("wind|storm|wnd|hurricane|typhoon", 
                         reducedStormData$EVTYPE, ignore.case = TRUE), "damageSource"] <- "Winds"
reducedStormData[grepl("slide|erosion|slump", 
                         reducedStormData$EVTYPE, ignore.case = TRUE), "damageSource"] <- "Landslides"
reducedStormData[grepl("warmth|warm|heat|dry|hot|drought|thermia|temperature record|record temperature|record high", 
                         reducedStormData$EVTYPE, ignore.case = TRUE), "damageSource"] <- "Heat"
reducedStormData[grepl("cold|cool|ice|icy|frost|freeze|snow|winter|wintry|wintery|blizzard|chill|freezing|avalanche|glaze|sleet", 
                         reducedStormData$EVTYPE, ignore.case = TRUE), "damageSource"] <- "Cold"
reducedStormData[grepl("flood|surf|blow-out|swells|fld|dam break", 
                         reducedStormData$EVTYPE, ignore.case = TRUE), "damageSource"] <- "Flood"
  reducedStormData[grepl("seas|high water|tide|tsunami|wave|current|marine|drowning", 
                         reducedStormData$EVTYPE, ignore.case = TRUE), "damageSource"] <- "Waves"
  reducedStormData[grepl("dust|saharan", 
                         reducedStormData$EVTYPE, ignore.case = TRUE), "damageSource"] <- "Dust"  
  reducedStormData[grepl("tstm|thunderstorm|lightning", 
                         reducedStormData$EVTYPE, ignore.case = TRUE), "damageSource"] <- "Thunderstorms"
  reducedStormData[grepl("tornado|spout|funnel|whirlwind", 
                         reducedStormData$EVTYPE, ignore.case = TRUE), "damageSource"] <- "Tornado"
  reducedStormData[grepl("fire|smoke|volcanic", 
                         reducedStormData$EVTYPE, ignore.case = TRUE), "damageSource"] <- "Fire"

  # remove uncategorized records (damageSource == NA) & cast as factor
  reducedStormData <- reducedStormData[complete.cases(reducedStormData[, "damageSource"]), ]
  reducedStormData$damageSource <- as.factor(reducedStormData$damageSource)

  # clean reducedStormData
  reducedStormData$EVTYPE <- NULL

```

## Results

#### 1. Across the United States, which types of events (as indicated in the EVTYPE variable) are most harmful with respect to population health?




#### 2. Across the United States, which types of events have the greatest economic consequences?

